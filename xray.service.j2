[Unit]
Description=XRay Proxy service (https://github.com/XTLS/Xray-core)
Wants=network.target
After=network.target


[Service]
Type=idle
User={{ xray_user }}
WorkingDirectory=/home/{{ xray_user }}/opt/xray
ExecStart=/home/{{ xray_user }}/opt/xray/xray run -c /home/{{ xray_user }}/opt/xray/config.json
CapabilityBoundingSet=CAP_NET_ADMIN CAP_NET_BIND_SERVICE
AmbientCapabilities=CAP_NET_ADMIN CAP_NET_BIND_SERVICE
NoNewPrivileges=true
LimitNPROC=10000
LimitNOFILE=1000000
Restart=always
RestartSec=60


[Install]
WantedBy=multi-user.target
